#!/bin/bash

# Directory containing the APK files
apk_directory="/apks" 

# Paths to python scripts
strace_python_script="syscall-tracing.py"
network_python_script="network-tracing.py"

# Taking choice from the user
echo "Choose an option:"
echo "1. Run strace script"
echo "2. Run network script"
read -p "Enter your choice (1 or 2): " choice

# Check user's choice and run the selected Python script
case "$choice" in
    1)
        for apk in "$apk_directory"/*.apk; do
            if [ -f "$apk" ]; then
                echo "Processing $apk with script1"
                python3 "$strace_python_script" "$apk"
            fi
        done
        ;;
    2)
        for apk in "$apk_directory"/*.apk; do
            if [ -f "$apk" ]; then
                echo "Processing $apk with script2"
                python3 "$network_python_script" "$apk"
            fi
        done
        ;;
    *)
        echo "Invalid choice. Please enter 1 or 2."
        ;;
esac
