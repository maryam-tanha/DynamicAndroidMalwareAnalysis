# apk-tracing
APK tracing to log sys-calls, api calls, network calls, etc

## Getting Started
1. Install all the required dependencies/libraries: `pip install -r requirements.txt`
2. Install adb and aapt using: https://www.xda-developers.com/install-adb-windows-macos-linux/ 
### Getting Syscalls
syscall-tracing script performs the following tasks:

1. Installs an Android application from the input repository using ADB.
2. Retrieves the process ID (PID) of the zygote process.
3. Runs strace on the zygote process, capturing the system calls and their output into a file.
4. Starts an application specified by the package name and runs it for 20 seconds.
5. Retrieves the PID of the application process.
6. Simulates user interactions on the application using Monkey for 200 seconds.
7. Stops the strace process and moves the strace output file to the output repository.

The script uses ADB commands to interact with the Android device/emulator and executes various operations such as installation, process management, and interaction simulation. The `get_package_name` function extracts the package name from the specified APK file using the `aapt` tool.

> To run the script: Please store the apk in the apk folder and run: `python3 install apks/sample.apk` or `python install apks/sample.apk`

> Note that the script assumes the presence of the necessary tools (`adb` and `aapt`) in the system's PATH, and it expects the APK file to be specified with the correct path and file name. The output file and output repository paths are also defined within the script.

## Potential errors and how to solve
1. Have the USB debugging mode on if testing on an actual device
2. May have to turn off if the USB debugging mode is already on and turn it back on when tryin to run adb shell